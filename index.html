<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="google-signin-client_id" content="593376484217-3f3nur4mq9brj88vus5116ed9v2qu1r8.apps.googleusercontent.com">
    <title>New Age - Start Bootstrap Theme</title>
</head>

<body>
    <div class="container">
        <div>
            Notificaciones PUSH
        </div>
        <div class="message"></div>
        <div>
            Device Token:
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-messaging-compat.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>

    <script>

        
        const firebaseConfig = {
            apiKey: "AIzaSyB10kyter7oJYYJ2RoCBf2Fa15B4wO79YA",
            authDomain: "pushnotification-dba8c.firebaseapp.com",
            projectId: "pushnotification-dba8c",
            storageBucket: "pushnotification-dba8c.appspot.com",
            messagingSenderId: "593376484217",
            appId: "1:593376484217:web:3bfef690feab616ee5ada8",
        };

        firebase.initializeApp(firebaseConfig);
        const messaging = firebase.messaging();

        // Generación de token
        
        if (Notification.permission === 'granted') {
            messaging.getToken({ vapidKey: "BL1qELJpeaWqP0hbJ16xPIooXYWOzHVBM_F4Nf1VY0h47tkdS5L2XMe-pFCm3mpa3RsOCQnXCPiorqQz6hK5_D4" })
            .then((currentToken) => {
                if (currentToken) {
                    console.log('Token:', currentToken);
                } else {
                    console.log('No registration token available.');
                }
            })
            .catch((err) => {
                console.log('An error occurred while retrieving token. Error:', err);
            });


            messaging.onMessage((payload) => {
            console.log("Mensaje Recibido", payload);
                });

            console.log("El permiso ya estaba concesido");
        } else {
            Notification.requestPermission().then(function (permission) {
                if (permission === 'granted') {
                    console.log("");
                } else {
                    // El usuario denegó el permiso de notificación, no puedes enviar notificaciones
                }
            });
        }
    </script>
</body>

</html>